!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactRouterDOM},function(e,t,n){e.exports={surveyContainer:"_2by1v-phfTPRD-HV11IgTh",surveyContainer__contentContainer:"_2009qd2iVE8JjqozL7LE8F",surveyContainer__error:"_2q6SqoAezZytyaA598nwH3",surveyContainer__errorSpan:"NfXdt95oIEe_Rs6xIdGaB",contentContainer__content:"_32iuypW7qQqLJhGwFO12OD",contentContainer__iconContainer:"_146uWkiNV42EvDA_EuYOoX",day:"_28AlKkiuEiYNXkX6HEwNTX",month:"_3MR0bzQsXoEUdetzOeWHwW",year:"x5yhsBaKyMXd3P6tx13a9",contentContainer__result:"_15gjIP7S9KGP0V_vc-OQec"}},function(e,t,n){"use strict";var a=n(13);n.o(a,"HttpStatusCode")&&n.d(t,"HttpStatusCode",(function(){return a.HttpStatusCode}));var r=n(4);n.d(t,"HttpStatusCode",(function(){return r.a}));n(14)},function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ok=200]="ok",e[e.noContent=204]="noContent",e[e.badRequest=400]="badRequest",e[e.unauthorized=401]="unauthorized",e[e.forbidden=403]="forbidden",e[e.notFound=404]="notFound",e[e.serverError=500]="serverError"}(a||(a={}))},function(e,t,n){e.exports={login:"G26siYeh4JS0yewBEQNZ2",form:"_3cadJuzJdGhba2aAGQ9tBU",submit:"zA1fb6gZFnUwWEeOv09-s",link:"SHkwd4YF6t4wLM2-7ty-i"}},function(e,t,n){e.exports={signup:"_1objGWOjtgnu6TYPE_AoYS",form:"_35jpUzMznV1D4I-HOZbrH3",submit:"_2WqJkXe4r_TnZRd1P7T7Bh",link:"_2oAY_jK4osAH17UU-dgEJ2"}},function(e,t,n){e.exports={container:"BQcXzMa_5qsG01g8ArgbN",container__spinner:"Fup5aOXXUG-c8ClcKL0c2",container__message:"_1F_kG3R8j6dN2UNWXrlGyh"}},function(e,t,n){e.exports={container:"_13PnbpzeNmfFz8wdD360YU",container__input:"_1gI7po5nkghQh0O7fNMF7t",container__status:"_3MGUMiCHWUAvV2Ld7JBhYC"}},function(e,t,n){e.exports={surveyContainer__header:"_1UumvtbzBQJmbDfPAS9Eco",surveyContainer__headerContent:"NcQVCnw6YAI-wm3vFyyoM",surveyContainer__headerLogout:"_20USLIEb5XqfUTT7h-SVdR"}},function(e,t,n){e.exports={contentContainer__iconContainer:"_2XiWCnPmWiLFggedNAJ8u2",contentContainer__iconContainer__green:"_2C5al6XGJ3FsF3S3srwJbY",contentContainer__iconContainer__red:"_1Z57DOHvfmla-aagZXLfse"}},function(e,t,n){e.exports={header:"_10ebiUVF7VT3qtDV0EinAt",header__h1:"_1Alc7k2RjrkI2rEBBdl8AF"}},function(e,t){e.exports=axios},function(e,t){},function(e,t){},function(e,t){e.exports=ReactDOM},function(e,t,n){e.exports={footer:"SiozRjzB2bTqCa9GIiKOq"}},function(e,t,n){e.exports={spinner:"_3ABpsfmD6wxzMRZwA3h8cO",spinner1:"_1muI60i3pM-Y24lbrGpdwx",spinner2:"_1QvKwu83ibZKBJZvEoXyVs",spinner3:"_21jtw79edoYNpa9z-OZyCq"}},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),i=n.n(o),s=n(1),c=n(5),u=n.n(c),l=n(16),d=n.n(l);var A=Object(a.memo)(()=>r.a.createElement("footer",{className:d.a.footer}));function m(){return r.a.createElement("img",{src:"data:image/png;base64,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"})}var f=n(17),p=n.n(f);function h(e){const t=[p.a.spinner,e.className].join(" ");return r.a.createElement("div",Object.assign({"data-testid":"spinner"},e,{className:t}),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}var g=n(7),E=n.n(g),v=Object(a.createContext)(null);function b(){const{state:e}=Object(a.useContext)(v);return r.a.createElement("div",{"data-testid":"error-container",className:E.a.container},e.isLoading&&r.a.createElement(h,{className:E.a.container__spinner}),e.message&&r.a.createElement("span",{"data-testid":"error-message",className:E.a.container__message},e.message))}var w=n(8),C=n.n(w);function y(e){const{state:t,setState:n}=Object(a.useContext)(v),o=t[e.name+"Error"];return r.a.createElement("div",{className:C.a.container},r.a.createElement("input",Object.assign({"data-testid":e.name,readOnly:!0,onFocus:function(e){e.target.readOnly=!1},className:C.a.container__input},e,{onChange:function(e){const t=e.target.name,a=e.target.value;n(e=>Object.assign(Object.assign({},e),{[t]:a}))}})),r.a.createElement("span",{"data-testid":e.name+"-status",className:C.a.container__status,title:o||"Tudo certo"},o?"ðŸ”´":"ðŸŸ¢"))}var O=n(11),j=n.n(O);var _=Object(a.memo)(()=>r.a.createElement("header",{className:j.a.header},r.a.createElement(m,null),r.a.createElement("h1",{className:j.a.header__h1},"4Dev - Enquetes para Programadores"))),x=n(9),N=n.n(x),B=Object(a.createContext)(null);function S(){const e=Object(s.useHistory)(),{setCurrentAccount:t}=Object(a.useContext)(B);return function(){t(void 0),e.replace("login")}}function R(){const e=S(),{getCurrentAccount:t}=Object(a.useContext)(B);return r.a.createElement("header",{className:N.a.surveyContainer__header},r.a.createElement("div",{className:N.a.surveyContainer__headerContent},r.a.createElement(m,null),r.a.createElement("div",{className:N.a.surveyContainer__headerLogout},r.a.createElement("span",{"data-testid":"username"},t().name),r.a.createElement("a",{"data-testid":"logout",onClick:function(t){t.preventDefault(),e()},href:"#"},"Sair"))))}var k,D=n(10),P=n.n(D);function H(e){return r.a.createElement("div",{className:function(){const t=e.iconType===k.thumbUp?P.a.contentContainer__iconContainer__green:P.a.contentContainer__iconContainer__red;return[P.a.contentContainer__iconContainer,t,e.className].join(" ")}()},r.a.createElement("img",{"data-testid":"icon",src:e.iconType}))}!function(e){e.thumbDown="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAEgAAAAA9nQVdAAAA70lEQVQ4Ea2RPQoCQQyFZ/w5g72lYOEVPIiV2IkIHmCvIZ5D77BgZWtrYWe1ICiuL8tEwjIZZmYNZCf7knyTzRrjrK7rAfwAr+AheyNZwiei98gNrBkISxYjz5KbZb0V4gXxlN8jzo+1tk91BOT6nhPmOFNg1Nb0UiCNxY0Uu8QW044BuMIZHs3DJzcra3/yOgem3UoT3pEcaQUh3TchAX9/KNTsy/mAtLebrzhXI+AqE/oQl55ErIfYxp5WothW71QyAJ0VWKG06DJAQ/jTA0yH0TUAzf4Gc8BFC5g3GcHI3IQvBy0asesDsB08CfYFB/44kX6+Hj8AAAAASUVORK5CYII=",e.thumbUp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAEgAAAAA9nQVdAAAA0klEQVQ4EWNgIAH8//+/AYhLSNCCWynUMCD1/zcQG+BWSYQMkmEgA0Egjght2JUANYO8iQ4MsasmIAo0BZthP4DirAS0YkrjMAzk0tOYqgmIADUVgnTiADPxakfStAWmECj2DkmcWOYjoEJPRpBqmEGMQABiI4vB5IikH1PbQAYmIm0mVtlLahu4nJpe/gf0hho1XbgVGKd3qWngRFBA4/LyX6AcKZZdBbpOB2QgLk1nQJIkgElwtaBEDAXIOUULKHYSiP/CJHHQX4Hic4CYBWYgADx8PyqFiuhJAAAAAElFTkSuQmCC"}(k||(k={}));var L=e=>function(){var e;const{getCurrentAccount:t}=Object(a.useContext)(B);return!(null===(e=t())||void 0===e?void 0:e.accessToken)}()?r.a.createElement(s.Route,Object.assign({},e,{component:()=>r.a.createElement(s.Redirect,{to:"/login"})})):r.a.createElement(s.Route,Object.assign({},e)),I=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function Q(e){const{setCurrentAccount:t}=Object(a.useContext)(B),n=Object(s.useHistory)(),[o,i]=Object(a.useState)({email:"",password:"",emailError:"",passwordError:"",message:"",isLoading:!1});function c(){return!!o.emailError||!!o.passwordError}return Object(a.useEffect)(()=>{const t={email:o.email,password:o.password};i(n=>Object.assign(Object.assign({},n),{emailError:e.validation.validate("email",t),passwordError:e.validation.validate("password",t)}))},[o.email,o.password]),r.a.createElement("div",{className:u.a.login},r.a.createElement(_,null),r.a.createElement(v.Provider,{value:{state:o,setState:i}},r.a.createElement("form",{"data-testid":"form",className:u.a.form,onSubmit:function(a){return I(this,void 0,void 0,(function*(){if(a.preventDefault(),!o.isLoading&&!c()){i(e=>Object.assign(Object.assign({},e),{isLoading:!0}));try{const a=yield e.authentication.auth({email:o.email,password:o.password});t(a),n.replace("")}catch(e){i(t=>Object.assign(Object.assign({},t),{isLoading:!1,message:e.message}))}}}))}},r.a.createElement("h2",null,"Login"),r.a.createElement(y,{type:"email",name:"email",placeholder:"Digite seu e-mail"}),r.a.createElement(y,{type:"password",name:"password",placeholder:"Digite sua senha"}),r.a.createElement("button",{type:"submit","data-testid":"submit",disabled:c(),className:u.a.submit},"Entrar"),r.a.createElement(s.Link,{"data-testid":"signup",to:"/signup",className:u.a.link},"Criar conta"),r.a.createElement(b,null))),r.a.createElement(A,null))}var U=n(6),G=n.n(U),W=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function K(e){const{setCurrentAccount:t}=Object(a.useContext)(B),n=Object(s.useHistory)(),[o,i]=Object(a.useState)({name:"",nameError:"",email:"",emailError:"",password:"",passwordError:"",passwordConfirmation:"",passwordConfirmationError:"",isLoading:!1,message:""});function c(){return!!(o.emailError||o.passwordError||o.nameError||o.passwordConfirmationError)}return Object(a.useEffect)(()=>{const t={name:o.name,email:o.email,password:o.password,passwordConfirmation:o.passwordConfirmation};i(n=>Object.assign(Object.assign({},n),{nameError:e.validation.validate("name",t),emailError:e.validation.validate("email",t),passwordError:e.validation.validate("password",t),passwordConfirmationError:e.validation.validate("passwordConfirmation",t)}))},[o.name,o.email,o.password,o.passwordConfirmation]),r.a.createElement("div",{className:G.a.signup},r.a.createElement(_,null),r.a.createElement(v.Provider,{value:{state:o,setState:i}},r.a.createElement("form",{"data-testid":"form",onSubmit:function(a){return W(this,void 0,void 0,(function*(){if(a.preventDefault(),!o.isLoading&&!c()){i(e=>Object.assign(Object.assign({},e),{isLoading:!0}));try{const a=yield e.addAccount.add({name:o.name,email:o.email,password:o.password,passwordConfirmation:o.passwordConfirmation});t(a),n.replace("")}catch(e){i(t=>Object.assign(Object.assign({},t),{isLoading:!1,message:e.message}))}}}))},className:G.a.form},r.a.createElement("h2",null,"Criar Conta"),r.a.createElement(y,{type:"text",name:"name",placeholder:"Digite seu nome"}),r.a.createElement(y,{type:"email",name:"email",placeholder:"Digite seu e-mail"}),r.a.createElement(y,{type:"password",name:"password",placeholder:"Digite sua senha"}),r.a.createElement(y,{type:"password",name:"passwordConfirmation",placeholder:"Repita sua senha"}),r.a.createElement("button",{type:"submit",disabled:c(),"data-testid":"submit",className:G.a.submit},"Cadastrar"),r.a.createElement(s.Link,{replace:!0,"data-testid":"signup",to:"/login",className:G.a.link},"Voltar para login"),r.a.createElement(b,null))),r.a.createElement(A,null))}var z=n(4);class V extends Error{constructor(){super("Credenciais invÃ¡lidas"),this.name="InvalidCredentialsError"}}class q extends Error{constructor(){super("Instabilidade no sistema. Tente novamente em breve."),this.name="UnexpectedError"}}class F extends Error{constructor(){super("Esse e-mail jÃ¡ tem uma conta atrelada"),this.name="EmailInUseError"}}class X extends Error{constructor(){super("Acesso negado!"),this.name="AccessDeniedError"}}var Y=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};class T{constructor(e,t){this.url=e,this.httpPostClient=t}auth(e){return Y(this,void 0,void 0,(function*(){const t={url:this.url,body:e},n=yield this.httpPostClient.post(t);switch(n.statusCode){case z.a.ok:return n.body;case z.a.unauthorized:throw new V;default:throw new q}}))}}function M(e){return"http://191.183.30.225:5050/api"+e}var J=n(12),Z=n.n(J),$=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};class ee{post(e){return $(this,void 0,void 0,(function*(){let t;try{t=yield Z.a.post(e.url,e.body)}catch(e){t=e.response}return this.adapt(t)}))}get(e){return $(this,void 0,void 0,(function*(){let t;try{t=yield Z.a.get(e.url,{headers:e.headers})}catch(e){t=e.response}return this.adapt(t)}))}adapt(e){return{statusCode:e.status,body:e.data}}}function te(){return new ee}class ne extends Error{constructor(){super("Campo obrigatÃ³rio"),this.name="RequiredFieldError"}}class ae extends Error{constructor(){super("Valor invÃ¡lido")}}class re{constructor(e){this.field=e,this.EMAIL_REGEX=/[a-z0-9!#$%&' * +/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/}validate(e){return this.isEmpty(e[this.field])||this.EMAIL_REGEX.test(e[this.field])?null:new ae}isEmpty(e){return!e}}class oe{constructor(e,t){this.field=e,this.minLength=t}validate(e){var t;return this.minLength>(null===(t=e[this.field])||void 0===t?void 0:t.length)?new ae:null}}class ie{constructor(e){this.field=e}validate(e){return e[this.field]?null:new ne}}class se{constructor(e){this.validators=e}static build(e){return new se(e)}validate(e,t){const n=this.validators.filter(t=>t.field===e);for(const e of n){const n=e.validate(t);if(n)return n.message}}}class ce{constructor(e,t){this.field=e,this.fieldToCompare=t}validate(e){return e[this.field]!==e[this.fieldToCompare]?new ae:null}}class ue{constructor(e,t){this.fieldName=e,this.validations=t}static field(e){return new ue(e,[])}required(){return this.validations.push(new ie(this.fieldName)),this}min(e){return this.validations.push(new oe(this.fieldName,e)),this}email(){return this.validations.push(new re(this.fieldName)),this}sameAs(e){return this.validations.push(new ce(this.fieldName,e)),this}build(){return this.validations}}function le(){return r.a.createElement(Q,{authentication:new T(M("/login"),te()),validation:se.build([...ue.field("email").required().email().build(),...ue.field("password").required().min(5).build()])})}var de=n(3),Ae=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};class me{constructor(e,t){this.url=e,this.httpPostClient=t}add(e){return Ae(this,void 0,void 0,(function*(){const t=yield this.httpPostClient.post({url:this.url,body:e});switch(t.statusCode){case de.HttpStatusCode.ok:return t.body;case de.HttpStatusCode.forbidden:throw new F;default:throw new q}}))}}function fe(){return r.a.createElement(K,{addAccount:new me(M("/signup"),te()),validation:se.build([...ue.field("name").required().min(5).build(),...ue.field("email").required().email().build(),...ue.field("password").required().min(5).build(),...ue.field("passwordConfirmation").required().sameAs("password").build()])})}class pe{set(e,t){t?localStorage.setItem(e,JSON.stringify(t)):localStorage.removeItem(e)}get(e){return JSON.parse(localStorage.getItem(e))}}function he(){return new pe}function ge(e){he().set("account",e)}function Ee(){return he().get("account")}var ve=n(2),be=n.n(ve);function we(e){const t=function({callback:e}){Object(s.useHistory)();const t=S(),{setCurrentAccount:n}=Object(a.useContext)(B);return function(n){n instanceof X?t():e(n)}}({callback:function(e){o(Object.assign(Object.assign({},n),{error:e.message}))}}),[n,o]=Object(a.useState)({surveys:[],error:"",reload:!1});function i(e){return e.didAnswer?k.thumbUp:k.thumbDown}function c(){o({surveys:[],error:"",reload:!n.reload})}function u(e){return r.a.createElement("div",{className:be.a.surveyContainer},r.a.createElement(R,null),r.a.createElement("main",{className:be.a.surveyContainer__contentContainer},r.a.createElement("h2",null,"Enquetes"),e),r.a.createElement(A,null))}return Object(a.useEffect)(()=>{e.loadSurveyList.all().then(e=>o(Object.assign(Object.assign({},n),{surveys:e}))).catch(t)},[n.reload]),n.error?u(r.a.createElement("div",{className:be.a.surveyContainer__error},r.a.createElement("span",{className:be.a.surveyContainer__errorSpan,"data-testid":"error"},n.error),r.a.createElement("button",{"data-testid":"reload",onClick:c},"Recarregar"))):u(r.a.createElement("ul",{"data-testid":"survey-list"},n.surveys.map(e=>r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:be.a.contentContainer__content},r.a.createElement(H,{iconType:i(e),className:be.a.contentContainer__iconContainer}),r.a.createElement("time",null,r.a.createElement("span",{"data-testid":"day",className:be.a.day},e.date.getDate().toString().padStart(2,"0")),r.a.createElement("span",{"data-testid":"month",className:be.a.month},e.date.toLocaleString("pt-BR",{month:"short"}).replace(".","")),r.a.createElement("span",{"data-testid":"year",className:be.a.year},e.date.getFullYear())),r.a.createElement("p",{"data-testid":"question"},e.question)),r.a.createElement("div",{className:be.a.contentContainer__result},"Ver Resultado")))))}var Ce=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};class ye{constructor(e,t){this.url=e,this.httpGetClient=t}all(){return Ce(this,void 0,void 0,(function*(){const e=yield this.httpGetClient.get({url:this.url});switch(e.statusCode){case de.HttpStatusCode.ok:return e.body.map(e=>Object.assign(e,{date:new Date(e.date)}));case de.HttpStatusCode.noContent:return[];case de.HttpStatusCode.forbidden:throw new X;default:throw new q}}))}convertStringToDate(e){return new Date(e)}}var Oe=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};class je{constructor(e,t){this.getStorage=e,this.httpGetClient=t}get(e){return Oe(this,void 0,void 0,(function*(){const t=this.getStorage.get("account");return(null==t?void 0:t.accessToken)&&Object.assign(e,{headers:Object.assign(this.mergeOrEmptyObject(e),{"x-access-token":t.accessToken})}),yield this.httpGetClient.get(e)}))}mergeOrEmptyObject(e){return e.headers||{}}}function _e(){return new ye(M("/surveys"),new je(he(),te()))}function xe(){return r.a.createElement(we,{loadSurveyList:_e()})}n(18);i.a.render(r.a.createElement((function(){return r.a.createElement(B.Provider,{value:{setCurrentAccount:ge,getCurrentAccount:Ee}},r.a.createElement(s.BrowserRouter,{basename:"/react-clean-architecture"},r.a.createElement(s.Switch,null,r.a.createElement(s.Route,{path:"/login",exact:!0,component:le}),r.a.createElement(s.Route,{path:"/signup",exact:!0,component:fe}),r.a.createElement(L,{path:"/",exact:!0,component:xe}))))}),null),document.getElementById("main"))}]);